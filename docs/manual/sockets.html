<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Sockets </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Sockets ">
    <meta name="generator" content="docfx 2.59.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="sockets">Sockets</h1>

<p>The <a href="xref:HurricaneVR.Framework.Core.Grabbers.HVRSocket">HVRSocket</a> component is useful for snapping objects into place for building things like inventories.</p>
<ul>
<li>Sockets require a subclass of <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRSocketFilter">HVRSocketFilter</a> that will determine if a grabbable object is allowed.
<ul>
<li>Multiple socket filters can be applied to a socket.</li>
<li>By default multiple filters run in 'AND' mode where all filters must be valid. To change to OR mode set the 'Filter Condition' field to OR. Then the object is allowed as long as one of the filtes IsValid method returns true.</li>
</ul>
</li>
<li>Each <a href="xref:HurricaneVR.Framework.Core.HVRGrabbable">HVRGrabbable</a> requires a subclass of <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRSocketable">HVRSocketable</a> that has a matching filter to validate it.
<ul>
<li>One <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRSocketable">HVRSocketable</a> can be assigned to a grabbable object.</li>
</ul>
</li>
</ul>
<h2 id="framework-provided-filters--socketables">Framework Provided Filters / Socketables</h2>
<h3 id="scriptable-object-based-filtering">Scriptable Object Based Filtering</h3>
<p>The <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRTagSocketFilter">HVRTagSocketFilter</a> and <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRTagSocketable">HVRTagSocketable</a> pair are used in the examples scenes for the inventory and holster sockets.<br>
They provide the easiest solution to get started with socket filtering for both programmers and non programmers.<br>
Code validation is done using bitwise integer masking which is extremely performant.</p>
<p>Both components accept <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRSocketableTags">HVRSocketableTags</a> where you can define 32 categories of objects in the editor.<br>
After assigning the 'Tags' field on the Filter / Socketable, a multi-select dropdown will appear allowing you to assign multiple tags to the Filter and Socketable.<br>
Create your own: Assets -&gt; Create -&gt; HurricaneVR -&gt; Socketables<br>
Be sure to File -&gt; Save or CTRL+S to save scriptable object changes after editing them in the inspector.</p>
<h3 id="grabbable-inclusion-filtering">Grabbable Inclusion Filtering</h3>
<p>The <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRGrabbableSocketFilter">HVRGrabbableSocketFilter</a> filter is used to filter specific grabbable objects that exist in your scene or prefab. This is used on the demo XR Rigs on the shoulder socket that holds the backpack.<br>
Any amount of grabbable objects can be assigned to the 'Valid Grabbables' field.</p>
<h3 id="grabbable-exclusion-filtering">Grabbable Exclusion Filtering</h3>
<p>The <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRGrabbableSocketExcluder">HVRGrabbableSocketExcluder</a> can be used to allow every socketable EXCEPT the grabbables assigned to the component.</p>
<h3 id="others">Others</h3>
<p>The rest of the included filters are deprecated due to the addition of the <a href="#scriptable-object-based-filtering">Tag Based Filtering</a> and may be removed in a future update.</p>
<p><a href="xref:HurricaneVR.Framework.Core.Sockets.HVRStringSocketFilter">HVRStringSocketFilter</a> + <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRStringSocketable">HVRStringSocketable</a><br>
<a href="xref:HurricaneVR.Framework.Core.Sockets.HVREnumSocketFilter%601">HVREnumSocketFilter</a> + <a href="xref:HurricaneVR.Framework.Core.Sockets.HVREnumSocketable%601">HVREnumSocketable</a><br>
<a href="xref:HurricaneVR.Framework.Core.Sockets.HVREnumFlagsSocketFilter%601">HVREnumFlagsSocketFilter</a> + <a href="xref:HurricaneVR.Framework.Core.Sockets.HVREnumFlagsSocketable%601">HVREnumFlagsSocketable</a></p>
<h2 id="socketable-orientation">Socketable Orientation</h2>
<p>Socketable objects are parented to the object and their transform values are reset. If the Socketable has it's 'Socket Orientation' field assigned to a child transform, the local position and rotation will be pulled from that transform and aligned with the socket object axes. The grabbable objects in the example scene have these orientation overrides set as an example.</p>
<p>If a socketable object is allowed into two different socket types, it's possible you will need to write custom orientation logic into one of the socket components. The DemoHolster socket subclass used in the example scene can be used as a guide. The small weapons (knife and gun) have DemoHolsterOrientation components with a Transform override that will align the socketable axis with the socket axis.</p>
<p>The below code snippet shows the two virtual methods that the DemoHolster overrides from the <a href="xref:HurricaneVR.Framework.Core.Grabbers.HVRSocket">HVRSocket</a> class.</p>
<pre><code class="lang-csharp">protected override Quaternion GetRotationOffset(HVRGrabbable grabbable)
{
    var orientation = grabbable.GetComponent&lt;DemoHolsterOrientation&gt;();
    if (orientation &amp;&amp; orientation.Orientation)
        return orientation.Orientation.localRotation;
    return base.GetRotationOffset(grabbable);
}

protected override Vector3 GetPositionOffset(HVRGrabbable grabbable)
{
    var orientation = grabbable.GetComponent&lt;DemoHolsterOrientation&gt;();
    if (orientation &amp;&amp; orientation.Orientation)
        return orientation.Orientation.localPosition;
    return base.GetPositionOffset(grabbable);
}
</code></pre>
<h2 id="socketable-scaling">Socketable Scaling</h2>
<p>Each <a href="xref:HurricaneVR.Framework.Core.Grabbers.HVRSocket">HVRSocket</a> has the option 'Scale Grabbable' which will automatically scale socketable objects by their Mesh Renderer bounding box sizes.</p>
<p>The localScale will be set to the 'Size' field divided by the longest bounding box axis length.</p>
<p>The <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRSocketable.ScaleOverride">Scale Override</a> which should reference a disabled Box Collider for sizing can be used to override the Mesh Renderer Bounding Box.</p>
<p>Skinned Mesh Renderer based socketables must use <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRSocketable.ScaleOverride">Scale Override</a>, the Bow in the example scene uses this.</p>
<h2 id="hover-actions">Hover Actions</h2>
<p>Each <a href="xref:HurricaneVR.Framework.Core.Grabbers.HVRSocket">HVRSocket</a> can have any number of <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRSocketHoverAction">HVRSocketHoverAction</a> assigned to the ‘Hover Actions’ or ‘Hand Grab Actions’ fields.</p>
<p>The inventory sockets in the example scene have Hover Actions built to mimic Walking Dead: Saints and Sinners. They scale based on hand proximity and change to either green or red based on whether or not the socketable is allowed.</p>
<ul>
<li>HoverActions execute when the socket detects a <a href="xref:HurricaneVR.Framework.Core.HVRGrabbable">HVRGrabbable</a> in it's <a href="xref:HurricaneVR.Framework.Core.Bags.HVRGrabbableBag">HVRGrabbableBag</a></li>
<li>HandGrabActions execute when the socket is hovered by the <a href="xref:HurricaneVR.Framework.Core.Grabbers.HVRHandGrabber">HVRHandGrabber</a> .</li>
</ul>
<p>To create your own actions, subclass <a href="xref:HurricaneVR.Framework.Core.Sockets.HVRSocketHoverAction">HVRSocketHoverAction</a> and override the following methods.</p>
<pre><code class="lang-csharp">public abstract void OnHoverEnter(HVRSocket socket, HVRGrabbable grabbable, bool isValid);
public abstract void OnHoverExit(HVRSocket socket, HVRGrabbable grabbable, bool isValid);
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
